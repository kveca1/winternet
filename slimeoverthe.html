<script type="text/javascript" src="./node_modules/phaser/build/phaser.min.js"></script>
<script type="text/javascript">
/**
 * Generated from the Phaser Sandbox
 *
 * http://phaser.io/sandbox/rpqQRssz
 *
 * This source requires Phaser 2.6.2
 */
const GAME_WIDTH = 800;
const GAME_HEIGHT = 600;
var game = new Phaser.Game(GAME_WIDTH, GAME_HEIGHT, Phaser.AUTO, '', { preload: preload, create: create, update: update, render: render });

function preload() {

    game.stage.backgroundColor = '#000000';

    game.load.baseURL = 'http://examples.phaser.io/assets/';
    game.load.crossOrigin = 'anonymous';

    game.load.image('ball', 'sprites/slime.png');
    game.load.image('platform', 'sprites/platform.png');

}

var player;
var platforms;
var cursors;
var jumpButton;
var net;
var button;

var goal1;
var goal2;

function create() {

	button = false;
	
    player = game.add.sprite((GAME_WIDTH *.5) , 200, 'ball');//adds ball to the game

    game.physics.arcade.enable(player);

    player.body.collideWorldBounds = true;
    player.body.gravity.y = 500;

    platforms = game.add.physicsGroup();

	goal1 = new Phaser.Rectangle(0, GAME_HEIGHT - 50, 150, 50);
	goal2 = new Phaser.Rectangle(GAME_WIDTH - 150, GAME_HEIGHT - 50, 150, 50);


    platforms.create(150, GAME_HEIGHT - 50, 'platform');
    net = new Phaser.Rectangle(GAME_WIDTH *.5 - 3, 0, 6, GAME_HEIGHT - 50);

    platforms.setAll('body.immovable', true);

    cursors = game.input.keyboard.createCursorKeys();
    jumpButton = game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR);

}

function update () {

    game.physics.arcade.collide(player, platforms);
	player.body.velocity.x /= 1.05; /*frictional x movement*/

	if(player.body.position.x < 10) // pushes player sprite from wall
    {
         player.body.velocity.x += 50;
    }
    if(player.body.position.x > GAME_WIDTH - 10 - player.width)
    {
         player.body.velocity.x -= 50;
    }


    //player.body.velocity.x = 0;

	if(game.input.activePointer.isDown && !button) // Controls the movements of the Slime with respect to the cursor
	{
		button = true;
    	if (Math.abs(game.input.position.x - player.centerX) <= 100 && Math.abs(player.centerY - game.input.position.y) <= 100 && game.input.position.x > player.centerX)
    	{
   		     player.body.velocity.x = -250;
   		}
   		else if (Math.abs(player.centerX - game.input.position.x ) <= 100 && Math.abs(player.centerY - game.input.position.y) <= 100 && player.centerX > game.input.position.x)
    	{
        	player.body.velocity.x = 250;
    	}
    	
    	if (Math.abs(game.input.position.y - player.centerY) <= 100 && Math.abs(player.centerX - game.input.position.x) <= 100 && game.input.position.y > player.centerY)
    	{
			player.body.velocity.y = -250;
    	}
    	else if (Math.abs(player.centerY - game.input.position.y) <= 100 && Math.abs(player.centerX - game.input.position.x) <= 100 && player.centerY > game.input.position.y)
    	{
			player.body.velocity.y = 250;
    	}

	}
	else if(game.input.activePointer.isUp)//ensures the player must click a to interact and not hold down
	{
		button = false;
	}	
	
	
	
	
	
}

function render () {
game.debug.geom(net,'#0fffff');
game.debug.geom(goal1, "#ff0000");
game.debug.geom(goal2, "#ff0000");

}

</script>
